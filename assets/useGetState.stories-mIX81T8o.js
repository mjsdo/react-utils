import{j as e,a as u}from"./jsx-runtime-1H0H8r1V.js";import{r as t}from"./index-FaLGlFNx.js";const x=()=>{const[n,o]=t.useState(null),r=t.useRef();return t.useEffect(()=>{n&&(r&&clearTimeout(r.current),n.style.outline="3px solid orange",r.current=setTimeout(()=>{n.style.outline=""},300))}),o},p=n=>t.useCallback(()=>new Promise(r=>{n(s=>(r(s),s))}),[n]),$={title:"libs/react-use-get-state",parameters:{layout:"fullscreen"},decorators:[n=>e("div",{style:{padding:10},children:e(n,{})})]},b={border:"1px solid grey",padding:10},P=t.createContext(0),w=t.createContext(()=>Promise.resolve(0)),R=t.createContext(()=>{}),_=()=>t.useContext(P),j=()=>t.useContext(w),k=()=>t.useContext(R),z=({children:n})=>{const[o,r]=t.useState(0),s=p(r);return e(P.Provider,{value:o,children:e(w.Provider,{value:s,children:e(R.Provider,{value:r,children:n})})})},H=()=>u(z,{children:[e(O,{}),e("br",{}),e(M,{})]}),M=()=>{const n=j(),o=t.useRef(null),r=t.useRef(null),s=async()=>{if(!r.current)return;const c=r.current,i=await n();c.textContent=String(i)};return t.useEffect(()=>{if(!o.current)return;const c=o.current;c.textContent=String((Number(c.textContent)??-1)+1)}),u("div",{style:b,children:[e("h2",{children:"Count 구독 안한 컴포넌트"}),e("button",{type:"button",onClick:s,children:"현재 Count 반영하기"}),u("div",{children:[e("span",{children:"Count: "}),e("span",{"data-cy":"count",ref:r})]}),u("div",{children:[e("span",{children:"Render: "}),e("span",{ref:o,"data-cy":"render-count"})]})]})},O=()=>{const n=_(),o=t.useRef(null),r=k(),s=()=>r(c=>c+1);return t.useEffect(()=>{if(!o.current)return;const c=o.current;c.textContent=String((Number(c.textContent)??-1)+1)}),u("div",{style:b,children:[e("h2",{children:"Count 구독 한 컴포넌트"}),e("button",{type:"button",onClick:s,children:"Count 1 증가시키기"}),u("div",{children:[e("span",{children:"Count: "}),e("span",{"data-cy":"count",children:n})]}),u("div",{children:[e("span",{children:"Render: "}),e("span",{ref:o,"data-cy":"render-count"})]})]})},a={name:"Count",render:()=>e(H,{})},F=t.createContext(["",()=>{}]),E=t.createContext(["",()=>{}]),G=t.createContext(()=>Promise.resolve("")),I=t.createContext(()=>Promise.resolve("")),T=({children:n})=>{const[o,r]=t.useState(""),[s,c]=t.useState(""),i=p(r),l=p(c),C=t.useMemo(()=>[o,r],[o]),m=t.useMemo(()=>[s,c],[s]);return e(F.Provider,{value:C,children:e(E.Provider,{value:m,children:e(G.Provider,{value:i,children:e(I.Provider,{value:l,children:n})})})})},N=()=>{const[,n]=t.useState({}),o=t.useContext(G),r=t.useContext(I),s=x();return u("form",{onSubmit:async l=>{l.preventDefault();const C=await o(),m=await r();alert(`id: ${C}, pw: ${m}`)},ref:s,children:[e(U,{}),e(D,{}),e("br",{}),e("button",{type:"submit",children:"Submit"}),e("button",{type:"button",onClick:()=>n({}),children:"Form 리렌더"})]})},U=()=>{const n=x(),[o,r]=t.useContext(F);return u("div",{ref:n,children:[e("span",{children:"id: "}),e("input",{type:"text",value:o,onChange:s=>r(s.target.value)})]})},D=()=>{const n=x(),[o,r]=t.useContext(E);return u("div",{ref:n,children:[e("span",{children:"pw: "}),e("input",{type:"text",value:o,onChange:s=>r(s.target.value)})]})},d={name:"Form",decorators:[n=>e(T,{children:e(n,{})})],render:()=>e(N,{})};var h,f,v;a.parameters={...a.parameters,docs:{...(h=a.parameters)==null?void 0:h.docs,source:{originalSource:`{
  name: 'Count',
  render: () => <CountExample />
}`,...(v=(f=a.parameters)==null?void 0:f.docs)==null?void 0:v.source}}};var g,S,y;d.parameters={...d.parameters,docs:{...(g=d.parameters)==null?void 0:g.docs,source:{originalSource:`{
  name: 'Form',
  decorators: [Story => <FormProvider>\r
        <Story />\r
      </FormProvider>],
  render: () => <FormExample />
}`,...(y=(S=d.parameters)==null?void 0:S.docs)==null?void 0:y.source}}};const q=["CountStory","FormStory"],J=Object.freeze(Object.defineProperty({__proto__:null,CountStory:a,FormStory:d,__namedExportsOrder:q,default:$},Symbol.toStringTag,{value:"Module"}));export{a as C,d as F,J as U};
